# Generated by ansible-role-httpd

# VHost for serving site traffic

<VirtualHost 104.130.124.186:80>
     ServerName magento
    ErrorLog /var/log/apache2/magento-frontend-error.log
    CustomLog /var/log/apache2/magento-frontend-access.log combined

    SetEnvIf X-Forwarded-Proto https HTTPS=on

    #comment

    # ProxyPass will default add `X-Forwarded-For`, `X-Forwarded-Host` and `X-Forwarded-Server`
    ProxyPreserveHost On
    ProxyPass / http://127.0.0.1:6081/
    ProxyPassReverse / http://127.0.0.1:6081/
</VirtualHost>

<VirtualHost 2001:4800:7818:104:be76:4eff:fe04:3aa8:80>
    ServerName magento
    ErrorLog /var/log/apache2/magento-frontend-error.log
    CustomLog /var/log/apache2/magento-frontend-access.log combined

    SetEnvIf X-Forwarded-Proto https HTTPS=on

    #comment

    # ProxyPass will default add `X-Forwarded-For`, `X-Forwarded-Host` and `X-Forwarded-Server`
    ProxyPreserveHost On
#     ProxyPass / http://[::1]:6081/
#     ProxyPassReverse / http://[::1]:6081/
    ProxyPass / http://127.0.0.1:6081/
    ProxyPassReverse / http://127.0.0.1:6081/
</VirtualHost>



<VirtualHost *:443>
    ServerName magento
#    ServerName 104.130.124.186 2001:4800:7818:104:be76:4eff:fe04:3aa8
 #   ServerAlias 2001:4800:7818:104:be76:4eff:fe04:3aa8
    ErrorLog /var/log/apache2/magento-frontend-error.log
    CustomLog /var/log/apache2/magento-frontend-access.log combined

    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/magento.crt
    SSLCertificateKeyFile /etc/ssl/private/magento.key

    #comment


    # ProxyPass will default add `X-Forwarded-For`, `X-Forwarded-Host` and `X-Forwarded-Server`
    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto https
    RequestHeader set X-Forwarded-Port 443
    ProxyPass / http://127.0.0.1:6081/
    ProxyPassReverse / http://127.0.0.1:6081/
</VirtualHost>

<VirtualHost 2001:4800:7818:104:be76:4eff:fe04:3aa8:443>
    ServerName magento
#    ServerName 104.130.124.186 2001:4800:7818:104:be76:4eff:fe04:3aa8
 #   ServerAlias 2001:4800:7818:104:be76:4eff:fe04:3aa8
    ErrorLog /var/log/apache2/magento-frontend-error.log
    CustomLog /var/log/apache2/magento-frontend-access.log combined

    SSLEngine On
    SSLCertificateFile /etc/ssl/certs/magento.crt
    SSLCertificateKeyFile /etc/ssl/private/magento.key

    #comment


    # ProxyPass will default add `X-Forwarded-For`, `X-Forwarded-Host` and `X-Forwarded-Server`
    ProxyPreserveHost On
    RequestHeader set X-Forwarded-Proto https
    RequestHeader set X-Forwarded-Port 443
#     ProxyPass / http://[::1]:6081/
#     ProxyPassReverse / http://[::1]:6081/
    ProxyPass / http://127.0.0.1:6081/
    ProxyPassReverse / http://127.0.0.1:6081/
</VirtualHost>